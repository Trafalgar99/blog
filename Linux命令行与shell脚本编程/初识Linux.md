# 初始Linux

## 什么是Linux

### 深入探究Linux内核

Linux系统的核心是内核。内核控制着计算机系统上的所有硬件和软件，在必要时分配硬件， 并根据需要执行软件。 

内核主要负责以下四种功能：

+ 系统内存管理 
+ 软件程序管理 
+ 硬件设备管理 
+ 文件系统管理 

**1.系统内存管理**

操作系统内核的主要功能之一就是内存管理。内核不仅管理服务器上的可用物理内存，还可 以创建和管理虚拟内存（即实际并不存在的内存）。 

内核通过硬盘上的存储空间来实现虚拟内存，这块区域称为交换空间（swap space）。内核不断地在交换空间和实际的物理内存之间反复交换虚拟内存中的内容。这使得系统以为它拥有比物 理内存更多的可用内存
![](image/2020-05-21-18-01-29.png)

内存存储单元按组划分成很多块，这些块称作页面（page）。内核将每个内存页面放在物理 内存或交换空间。然后，内核会维护一个内存页面表，指明哪些页面位于物理内存内，哪些页面 被换到了磁盘上。 

内核会记录哪些内存页面正在使用中，并自动把一段时间未访问的内存页面复制到交换空间 区域（称为换出，swapping out）——即使还有可用内存。当程序要访问一个已被换出的内存页 面时，内核必须从物理内存换出另外一个内存页面给它让出空间，然后从交换空间换入请求的内 存页面。显然，这个过程要花费时间，拖慢运行中的进程。只要Linux系统在运行，为运行中的 程序换出内存页面的过程就不会停歇。

**2. 软件程序管理**

Linux操作系统将运行中的程序称为进程。进程可以在前台运行，将输出显示在屏幕上，也 可以在后台运行，隐藏到幕后。内核控制着Linux系统如何管理运行在系统上的所有进程。 

内核创建了第一个进程（称为init进程）来启动系统上所有其他进程。当内核启动时，它会 将init进程加载到虚拟内存中。内核在启动任何其他进程时，都会在虚拟内存中给新进程分配一 块专有区域来存储该进程用到的数据和代码。 

一些Linux发行版使用一个表来管理在系统开机时要自动启动的进程。在Linux系统上，这个 表通常位于专门文件/etc/inittab中。 

Linux操作系统的init系统采用了运行级。
Linux操作系统有5个启动运行级。 

运行级为1时，只启动基本的系统进程以及一个控制台终端进程。我们称之为单用户模式。 单用户模式通常用来在系统有问题时进行紧急的文件系统维护。显然，在这种模式下，仅有一个 人（通常是系统管理员）能登录到系统上操作数据。 

标准的启动运行级是3。在这个运行级上，大多数应用软件，比如网络支持程序，都会启动。 另一个Linux中常见的运行级是5。在这个运行级上系统会启动图形化的X Window系统，允许用 户通过图形化桌面窗口登录系统。 

Linux系统可以通过调整启动运行级来控制整个系统的功能。通过将运行级从3调整成5，系 统就可以从基于控制台的系统变成更先进的图形化X Window系统。 

**3.硬件管理设备**

内核的另一职责是管理硬件设备。任何Linux系统需要与之通信的设备，都需要在内核代码 中加入其驱动程序代码。驱动程序代码相当于应用程序和硬件设备的中间人，允许内核与设备之 间交换数据。在Linux内核中有两种方法用于插入设备驱动代码： 

+ 编译进内核的设备驱动代码 
+ 可插入内核的设备驱动模块 

以前，插入设备驱动代码的唯一途径是重新编译内核。每次给系统添加新设备，都要重新编 译一遍内核代码。随着Linux内核支持的硬件设备越来越多，这个过程变得越来越低效。不过好 在Linux开发人员设计出了一种更好的将驱动代码插入运行中的内核的方法。 

Linux系统将硬件设备当成特殊的文件，称为设备文件。设备文件有3种分类： 

+ 字符型设备文件 
+ 块设备文件 
+ 网络设备文件 

字符型设备文件是指处理数据时每次只能处理一个字符的设备。大多数类型的调制解调器和 终端都是作为字符型设备文件创建的。块设备文件是指处理数据时每次能处理大块数据的设备， 比如硬盘。 

网络设备文件是指采用数据包发送和接收数据的设备，包括各种网卡和一个特殊的回环设 备。这个回环设备允许Linux系统使用常见的网络编程协议同自身通信。 

Linux为系统上的每个设备都创建一种称为节点的特殊文件。与设备的所有通信都通过设 备节点完成。每个节点都有唯一的数值对供Linux内核标识它。数值对包括一个主设备号和一 个次设备号。类似的设备被划分到同样的主设备号下。次设备号用于标识主设备组下的某个特 定设备。 

**4.文件系统管理**

不同于其他一些操作系统，Linux内核支持通过不同类型的文件系统从硬盘中读写数据。除 了自有的诸多文件系统外，Linux还支持从其他操作系统（比如Microsoft Windows）采用的文件 系统中读写数据。内核必须在编译时就加入对所有可能用到的文件系统的支持。
![](image/2020-05-21-18-20-43.png)

Linux内核采用虚拟文件系统（Virtual File System，VFS）作为和每个文件系统交互的接口。 这为Linux内核同任何类型文件系统通信提供了一个标准接口。当每个文件系统都被挂载和使用 时，VFS将信息都缓存在内存中。 

### GNU工具

除了由内核控制硬件设备外，操作系统还需要工具来执行一些标准功能，比如控制文件和 程序。

将Linus的Linux内核和GNU操作系统工具 整合起来，就产生了一款完整的、功能丰富的免费操作系统。

**1.核心GNU工具**

GNU项目的主旨在于为Unix系统管理员设计出一套类似于Unix的环境。这个目标促使该项目 移植了很多常见的Unix系统命令行工具。供Linux系统使用的这组核心工具被称为coreutils（core utilities）软件包。 

**2.shell**

GNU/Linux shell是一种特殊的交互式工具。它为用户提供了启动程序、管理文件系统中的文 件以及运行在Linux系统上的进程的途径。shell的核心是命令行提示符。命令行提示符是shell负责 交互的部分。它允许你输入文本命令，然后解释命令，并在内核中执行。 

shell包含了一组内部命令，用这些命令可以完成诸如复制文件、移动文件、重命名文件、显 示和终止系统中正运行的程序等操作。shell也允许你在命令行提示符中输入程序的名称，它会将 程序名传递给内核以启动它。 

你也可以将多个shell命令放入文件中作为程序执行。这些文件被称作shell脚本。你在命令行 上执行的任何命令都可放进一个shell脚本中作为一组命令执行。这为创建那种需要把几个命令放 在一起来工作的工具提供了便利。 

### Linux桌面环境

**1. X Window系统**

有两个基本要素决定了视频环境：显卡和显示器。要在电脑上显示绚丽的画面，Linux软件 就得知道如何与这两者互通。X Window软件是图形显示的核心部分。 X Window软件是直接和PC上的显卡及显示器打交道的底层程序。它控制着Linux程序如何在 电脑上显示出漂亮的窗口和图形。 

**2.KDE桌面**

KDE（K Desktop Environment，K桌面环境）初于1996年作为开源项目发布。它会生成一 个类似于Microsoft Windows的图形化桌面环境。

**3.GNOME桌面**

GNOME（the GNU Network Object Model Environment，GNU网络对象模型环境）是另一个 流行的Linux桌面环境。GNOME于1999年首次发布，现已成为许多Linux发行版默认的桌面环境

**4.Unity桌面**

Unity桌面得名于该项目的目标——为工作站、平板电脑以及移动设备提供一致的桌面体验。 不管你是在工作站还是在手机上使用Ubuntu，Unity桌面的使用方式都是一样的。

---------------------------
## Linux发行版

### 核心Linux发行版 

核心Linux发行版含有内核、一个或多个图形化桌面环境以及预编译好的几乎所有能见到的 Linux应用。它提供了一站式的完整Linux安装。

![](image/2020-05-21-19-43-24.png)

